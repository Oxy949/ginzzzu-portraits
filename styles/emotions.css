#ginzzzu-portrait-layer .threeo-emo-toolbar {
  position: absolute;
  z-index: 9999;

  display: flex;
  align-items: center;
  justify-content: center;

  opacity: 0;
  pointer-events: none;

  transform-origin: center;
  transition:
    opacity 160ms ease,
    transform 160ms ease;

  --threeo-emo-inner-flip: 1;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper {
  --threeo-emo-scale: 1;
  --threeo-emo-intensity: 1;
  --emotion-animation: none;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.threeo-emo-pos-top .threeo-emo-toolbar {
  top: 0;
  left: 50%;
  transform: translate(-50%, calc(-70% + var(--portrait-height-offset-y, 0px)))
             scale(var(--threeo-emo-scale))
             scaleX(var(--threeo-emo-inner-flip, 1));
  flex-direction: row;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.threeo-emo-pos-left .threeo-emo-toolbar {
  left: 0;
  top: 50%;
  transform: translate(-60%, calc(-50% + var(--portrait-height-offset-y, 0px)))
             scale(var(--threeo-emo-scale))
             scaleX(var(--threeo-emo-inner-flip, 1));
  flex-direction: column;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.threeo-emo-pos-right .threeo-emo-toolbar {
  right: 0;
  top: 50%;
  transform: translate(60%, calc(-50% + var(--portrait-height-offset-y, 0px)))
             scale(var(--threeo-emo-scale))
             scaleX(var(--threeo-emo-inner-flip, 1));
  flex-direction: column;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.ginzzzu-portrait-flipped .threeo-emo-toolbar {
  --threeo-emo-inner-flip: -1;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper:hover .threeo-emo-toolbar {
  opacity: 1;
  pointer-events: auto;
}

#ginzzzu-portrait-layer .threeo-emo-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: 0 3px;
  margin: 0;

  background: transparent !important;
  border: none !important;
  box-shadow: none !important;

  cursor: pointer;
  outline: none;

  transition:
    transform 120ms ease,
    filter 120ms ease;
}

#ginzzzu-portrait-layer .threeo-emo-btn:hover {
  transform: translateY(-1px) scale(1.04);
}

#ginzzzu-portrait-layer .threeo-emo-btn.is-active {
  transform: scale(1.08);
  filter: brightness(1.45) drop-shadow(0 0 4px rgb(199, 199, 18));
}

#ginzzzu-portrait-layer .threeo-emo-btn .threeo-emo-emoji {
  font-size: 22px;
  line-height: 1;
  filter:
    drop-shadow(0 0 3px rgba(0,0,0,0.7))
    drop-shadow(0 0 8px rgba(0,0,0,0.7));
}

#ginzzzu-portrait-layer .threeo-emo-toolbar .threeo-emo-config {
  padding-left: 10px;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper[class*="emo-"] img {
  transition: filter 200ms ease, transform 200ms ease;
}

/* ----------------------------------------------------
   –≠–§–§–ï–ö–¢–´ –¶–í–ï–¢–ö–û–†–ê –î–õ–Ø –ü–û–†–¢–†–ï–¢–û–í
---------------------------------------------------- */

/* –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–∏–ª –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–∞ —ç–º–æ—Ü–∏–π = 0,
   –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å .threeo-emo-no-shadow ‚Äî —ç–º–æ—Ü–∏–æ–Ω–Ω—ã–µ filter'—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
   (–≤–Ω–∏–º–∞–Ω–∏–µ: –ø—Ä–∞–≤–∏–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ :not() —É —Å–∞–º–∏—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ —ç–º–æ—Ü–∏–π) */

/* üòä –†–∞–¥–æ—Å—Ç—å ‚Äî —Ç—ë–ø–ª–∞—è –∂–µ–ª—Ç–æ–≤–∞—Ç–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ */
#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-joy-color:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 + 0.15 * var(--threeo-emo-intensity)))
          saturate(calc(1 + 0.25 * var(--threeo-emo-intensity)))
          drop-shadow(0 0 18px rgba(255, 215, 80, calc(0.6 * var(--threeo-emo-intensity)))) !important;
}

/* üò† –ê–≥—Ä–µ—Å—Å–∏—è ‚Äî –∫—Ä–∞—Å–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –∏ –ª—ë–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-anger-color:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 + 0.1 * var(--threeo-emo-intensity)))
          contrast(calc(1 + 0.4 * var(--threeo-emo-intensity)))
          saturate(calc(1 + 0.3 * var(--threeo-emo-intensity)))
          drop-shadow(0 0 22px rgba(237, 23, 23, calc(0.55 * var(--threeo-emo-intensity)))) !important;
}

/* üò¢ –ü–µ—á–∞–ª—å ‚Äî —Ö–æ–ª–æ–¥–Ω–æ–µ –≥–æ–ª—É–±–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ, –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ */
#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-sad-color:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 - 0.15 * var(--threeo-emo-intensity)))
          saturate(calc(1 - 0.1 * var(--threeo-emo-intensity)))
          contrast(calc(1 + 0.1 * var(--threeo-emo-intensity)))
          hue-rotate(calc(180deg * var(--threeo-emo-intensity)))
          drop-shadow(0 0 20px rgba(110, 160, 255, calc(0.55 * var(--threeo-emo-intensity)))) !important;
}

/* üíñ –°–∏–º–ø–∞—Ç–∏—è ‚Äî —Ä–æ–∑–æ–≤–æ-–ª–∏–ª–æ–≤–æ–µ –º—è–≥–∫–æ–µ —Å–∏—è–Ω–∏–µ */
#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-love-color:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 + 0.15 * var(--threeo-emo-intensity)))
          saturate(calc(1 + 0.2 * var(--threeo-emo-intensity)))
          drop-shadow(0 0 22px rgba(255, 120, 200, calc(0.55 * var(--threeo-emo-intensity)))) !important;
}

/* üò± –°—Ç—Ä–∞—Ö ‚Äî —Å–∏–Ω–µ–≤–∞—Ç–æ–µ —Ö–æ–ª–æ–¥–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –∏ –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç */
#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-fear-color:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 - 0.1 * var(--threeo-emo-intensity)))
          saturate(calc(1 - 0.7 * var(--threeo-emo-intensity)))
          contrast(calc(1 + 0.35 * var(--threeo-emo-intensity)))
          hue-rotate(calc(150deg * var(--threeo-emo-intensity)))
          drop-shadow(0 0 22px rgba(80, 120, 255, calc(0.55 * var(--threeo-emo-intensity)))) !important;
}

/* üò™ –£—Å—Ç–∞–ª–æ—Å—Ç—å ‚Äî –º—è–≥–∫–æ–µ –ø—Ä–∏–≥–ª—É—à–µ–Ω–∏–µ, –ª–µ–≥–∫–∏–π —Å–µ—Ä–æ-–∂—ë–ª—Ç—ã–π —Ç–æ–Ω */
#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-tired-color:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 - 0.15 * var(--threeo-emo-intensity)))
          saturate(calc(1 - 0.88 * var(--threeo-emo-intensity)))
          contrast(calc(1 + 0.92 * var(--threeo-emo-intensity)))
          hue-rotate(calc(0deg * var(--threeo-emo-intensity)))
          drop-shadow(0 0 16px rgba(200, 180, 120, calc(0.45 * var(--threeo-emo-intensity)))) !important;
}

/* ü§ï –ë–æ–ª—å ‚Äî —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ-–∫—Ä–∞—Å–Ω–æ–≤–∞—Ç—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ + –∫–æ–Ω—Ç—Ä–∞—Å—Ç */
#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-hurt-color:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 - 0.1 * var(--threeo-emo-intensity)))
          saturate(calc(1 + 0.4 * var(--threeo-emo-intensity)))
          contrast(calc(1 + 0.15 * var(--threeo-emo-intensity)))
          hue-rotate(calc(-10deg * var(--threeo-emo-intensity)))
          drop-shadow(0 0 22px rgba(221, 32, 32, calc(0.55 * var(--threeo-emo-intensity)))) !important;
}

/* –¢—É—Ç –º–æ–≥–ª–∞ –±—ã—Ç—å –≤–∞—à–∞ —ç–º–æ—Ü–∏—è */

/* ----------------------------------------------------
   –ö–û–ù–ï–¶ –¶–í–ï–¢–ö–û–†–ê –î–õ–Ø –ü–û–†–¢–†–ï–¢–û–í
---------------------------------------------------- */


#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper[class*="custom-emo"]:not(.threeo-emo-no-shadow) img {
  filter: brightness(calc(1 + 0.1 * var(--threeo-emo-intensity)))
          saturate(calc(1 + 0.15 * var(--threeo-emo-intensity))) !important;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper {
  --shakeX: 0px;
  --bobY: 0px;
  --pulse: 1;
  --tilt: 0deg;
  --flip-scale-x: var(--flip-scale-x, 1);
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper {
  transform:
    translate3d(
      var(--shakeX, 0px),
      calc(var(--bobY, 0px) + var(--ginzzzu-dim-offset-y, 0px)),
      0
    )
    scale(var(--pulse, 1))
    rotate(var(--tilt, 0deg))
    scaleX(var(--ginzzzu-flip-scale-x, 1));
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-custom-motion {
  animation: var(--emotion-animation, none) 0.45s ease-in-out infinite;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper[class*="custom-emo"] {
  animation: var(--emotion-animation, none) 0.45s ease-in-out infinite;
}

/* ----------------------------------------------------
   –≠–§–§–ï–ö–¢–´ –î–í–ò–ñ–ï–ù–ò–Ø –î–õ–Ø –ü–û–†–¢–†–ï–¢–û–í
---------------------------------------------------- */

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-shake-motion {
  animation: var(--emotion-animation, shake) 0.22s linear infinite;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-sag-motion {
  animation: var(--emotion-animation, sag) 2.4s ease-in-out infinite;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-shiver-motion {
  animation: var(--emotion-animation, shiver) 0.58s linear infinite;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-bob-motion {
  animation: var(--emotion-animation, bob) 0.3s ease-in-out infinite;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-beat-motion {
  animation: var(--emotion-animation, beat) 1.2s ease-in-out infinite;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-tired-motion {
  animation: var(--emotion-animation, tired) 2.8s ease-in-out infinite;
}

#ginzzzu-portrait-layer .ginzzzu-portrait-wrapper.emo-pulse-motion {
  animation: var(--emotion-animation, pulse) 0.5s ease-in-out infinite;
}

/* –¢—É—Ç –º–æ–≥–ª–∞ –±—ã—Ç—å –≤–∞—à–∞ –∞–Ω–∏–º–º–∞—Ü–∏—è */

/* ----------------------------------------------------
   –ö–û–ù–ï–¶ –≠–§–§–ï–ö–¢–û–í –î–í–ò–ñ–ï–ù–ò–Ø –î–õ–Ø –ü–û–†–¢–†–ï–¢–û–í
---------------------------------------------------- */


/* –ö–µ–π—Ñ—Ä–µ–π–º—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç–º–æ—Ü–∏—è–º–∏ */
@keyframes shake {
  0%   { --shakeX: 0px; }
  20%  { --shakeX: -2px; }
  40%  { --shakeX: 2px; }
  60%  { --shakeX: -1px; }
  80%  { --shakeX: 1px; }
  100% { --shakeX: 0px; }
}

@keyframes sag {
  0%,100% { --bobY: 0px; }
  50%     { --bobY: 3px; }
}

@keyframes shiver {
  0%   { --shakeX: 0px;     --bobY: 0px; }
  10%  { --shakeX: -1px;  --bobY: -0px; }
  20%  { --shakeX: 1px;   --bobY: 0px; }
  30%  { --shakeX: -1.2px;  --bobY: -0px; }
  40%  { --shakeX: 1.2px;   --bobY: 0px; }
  50%  { --shakeX: -1px;    --bobY: -0px; }
  60%  { --shakeX: 1px;     --bobY: 0px; }
  80%  { --shakeX: -1px;    --bobY: 0px; }
  100% { --shakeX: 0px;     --bobY: 0px; }
}

@keyframes bob {
  0%, 100% { --bobY: 0px; }
  50%      { --bobY: 10px; }
}

@keyframes beat {
  0%, 100% { --pulse: 1; }
  25%      { --pulse: 1.02; }
  50%      { --pulse: 1.04; }
  75%      { --pulse: 1.02; }
}

@keyframes tired {
  0%,100% { --bobY: 0px;   --tilt: 0deg; }
  50%     { --bobY: 2px;   --tilt: -0.6deg; }
}

@keyframes pulse {
  0%   { --pulse: 1; }
  50%  { --pulse: 1.02; }
  100% { --pulse: 1; }
}